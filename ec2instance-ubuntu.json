{
    "Description": "This AWS CloudFormation template is intended to create an Ubuntu 18.04 instance, with port 80 exposed.",
    "Parameters" : {},
    "Resources": {
        "UbuntuInstance": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "InstanceType": "t2.micro",
                "ImageId": "ami-0d5d9d301c853a04a",
                "SecurityGroups": [
                    {
                        "Ref": "InstanceSecurityGroup"
                    }
                ]
            }
        },
        "InstanceSecurityGroup" : {
            "Type" : "AWS::EC2::SecurityGroup",
            "Properties" : {
                "GroupDescription" : "Enable HTTP access via port 80",
                "SecurityGroupIngress" : [
                    {"IpProtocol" : "tcp", "FromPort" : "80", "ToPort" : "80", "CidrIp" : "0.0.0.0/0"},
                    {"IpProtocol" : "tcp", "FromPort" : "22", "ToPort" : "22", "CidrIp" : "0.0.0.0/0"}
                ]
            }
        }
    },
    "Outputs" : {
        "WebsiteURL" : {
            "Description" : "URL for newly created LAMP stack",
            "Value" : { "Fn::Join" : ["", ["http://", { "Fn::GetAtt" : [ "UbuntuInstance", "PublicDnsName" ]}]] }
        }
    }
}