{
    "Description": "This AWS CloudFormation template is intended to create an Ubuntu 18.04 instance, with port 80 exposed.",
    "Parameters" : {
        "InstanceType":{
            "Type":"String",
            "Default": "t2.micro"
        },
        "Image":{
            "Type":"String",
            "Default": "ami-0fb0129cd568fe35f"
        },
        "ServerName":{
            "Type": "String",
            "Description": "Name your server"
        }
    },
    "Resources": {
        "UbuntuInstance": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "InstanceType": { "Ref" : "InstanceType" },
                "ImageId": { "Ref" : "Image" },
                "SecurityGroups": [
                    {
                        "Ref": "InstanceSecurityGroup"
                    }
                ]
            }
        },
        "InstanceSecurityGroup" : {
            "Type" : "AWS::EC2::SecurityGroup",
            "Properties" : {
                "GroupDescription" : "Enable HTTP access via port 80",
                "SecurityGroupIngress" : [
                    {"IpProtocol" : "tcp", "FromPort" : "80", "ToPort" : "80", "CidrIp" : "0.0.0.0/0"},
                    {"IpProtocol" : "tcp", "FromPort" : "22", "ToPort" : "22", "CidrIp" : "0.0.0.0/0"}
                ]
            }
        }
    },
    "Outputs" : {
        "WebsiteURL" : {
            "Description" : "URL for newly created LAMP stack",
            "Value" : { "Fn::Join" : ["", ["http://", { "Fn::GetAtt" : [ "UbuntuInstance", "PublicDnsName" ]}]] }
        }
    }
}